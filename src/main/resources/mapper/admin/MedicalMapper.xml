<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.hospital.admin.mapper.MedicalMapper">
	<select id="mlist" resultType="Hashmap">
		select m.*,u.user_jumin from medical m
		inner join user u on m.user_id=u.user_id
		where ${stype} like concat('%',#{sword},'%') limit #{index},10
	</select>
	<select id="getChong" resultType="int">
		select ceil(count(*)/10) from medical m
		where ${stype} like concat('%',#{sword},'%')
	</select>
	
	<select id="getDocid" resultType="String">
		select doc_id from doctor where doc_userid=#{userid}
	</select>
	<select id="getPatient" resultType="kr.co.hospital.admin.dto.ReserveDto">
		SELECT * FROM reserve 
    WHERE 
    <if test="doc_id != null and doc_id != ''">
        doc_id = #{doc_id} AND 
    </if>
    res_date > CURDATE();
	</select>
	<select id="getName" resultType="String">
		select user_name from user where user_id=#{userid}
	</select>
	<select id="getDocName" resultType="string">
		select doc_name from doctor
		where doc_id=#{doc_id}
	</select>
</mapper>